{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{RNiq:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__N_SSP\",(function(){return y}));var r=n(\"ODXe\"),i=n(\"q1tI\"),o=n.n(i),a=n(\"/MKj\"),c=n(\"ob4f\"),u=n(\"1zst\"),s=n(\"Vl3Y\"),l=n(\"5rEg\"),f=n(\"2/Rp\"),d=n(\"p+NB\"),p=n(\"3zrx\"),v=o.a.createElement,h=function(){var t=Object(a.c)((function(t){return t.post})),e=t.imagePaths,n=t.addPostDone,o=Object(p.a)(\"\"),c=Object(r.a)(o,3),u=c[0],h=c[1],b=c[2],g=Object(a.b)(),y=Object(i.useRef)(),m=Object(i.useCallback)((function(){y.current.click()}),[y.current]);Object(i.useEffect)((function(){n&&b(\"\")}),[n]);var w=Object(i.useCallback)((function(){var t=new FormData;return e.forEach((function(e){t.append(\"image\",e)})),t.append(\"content\",u),g({type:d.e,data:t})}),[u,e]),O=Object(i.useCallback)((function(t){console.log(\"image\",t.target.files);var e=new FormData;[].forEach.call(t.target.files,(function(t){e.append(\"image\",t)})),g({type:d.G,data:e})})),k=Object(i.useCallback)((function(t){return function(){g({type:d.v,data:t})}}),[]);return v(s.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:w},v(l.a.TextArea,{value:u,onChange:h,maxLength:140,placeholder:\"\\ubb50\\ub4e0\\uc9c0 \\ucd94\\uac00\\ud574\\ubcf4\\uc138\\uc694 ! \"}),v(\"div\",null,v(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:y,onChange:O}),v(f.a,{onClick:m},\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"),v(f.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\"},\"\\uc5c5\\ub85c\\ub4dc\")),v(\"div\",null,e.map((function(t,e){return v(\"div\",{key:t,style:{display:\"inline-block\"}},v(\"img\",{src:\"http://localhost:3065/\".concat(t),style:{width:\"200px\"},alt:t}),v(\"div\",null,v(f.a,{onClick:k(e)},\"\\uc81c\\uac70\")))}))))},b=n(\"kduo\"),g=o.a.createElement;var y=!0;e.default=function(){var t=Object(a.b)(),e=Object(a.c)((function(t){return t.user})).me,n=Object(a.c)((function(t){return t.post})),o=n.mainPosts,s=n.hasMorePosts,l=n.loadPostsLoading,f=n.repostError,p=Object(c.a)(),v=Object(r.a)(p,2),y=v[0],m=v[1];return Object(i.useEffect)((function(){if(m&&s&&!l){var e,n=null===(e=o[o.length-1])||void 0===e?void 0:e.id;t({type:d.n,lastId:n})}}),[s,l,o]),Object(i.useEffect)((function(){f&&alert(f)}),[f]),g(u.a,null,e&&g(h,null),o.map((function(t){return g(b.a,{key:t.id,post:t})})),g(\"div\",{ref:s&&!l?y:void 0,style:{height:10}}))}},ob4f:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return v}));var r=n(\"q1tI\");function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=new Map,c=new WeakMap,u=0,s=void 0;function l(t){return Object.keys(t).sort().filter((function(e){return void 0!==t[e]})).map((function(e){return e+\"_\"+(\"root\"===e?(n=t.root)?(c.has(n)||(u+=1,c.set(n,u.toString())),c.get(n)):\"0\":t[e]);var n})).toString()}function f(t,e,n,r){if(void 0===n&&(n={}),void 0===r&&(r=s),\"undefined\"===typeof window.IntersectionObserver&&void 0!==r){var i=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:\"number\"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var o=function(t){var e=l(t),n=a.get(e);if(!n){var r,i=new Map,o=new IntersectionObserver((function(e){e.forEach((function(e){var n,o=e.isIntersecting&&r.some((function(t){return e.intersectionRatio>=t}));t.trackVisibility&&\"undefined\"===typeof e.isVisible&&(e.isVisible=o),null==(n=i.get(e.target))||n.forEach((function(t){t(o,e)}))}))}),t);r=o.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:o,elements:i},a.set(e,n)}return n}(n),c=o.id,u=o.observer,f=o.elements,d=f.get(t)||[];return f.has(t)||f.set(t,d),d.push(e),u.observe(t),function(){d.splice(d.indexOf(e),1),0===d.length&&(f.delete(t),u.unobserve(t)),0===f.size&&(u.disconnect(),a.delete(c))}}var d=[\"children\",\"as\",\"triggerOnce\",\"threshold\",\"root\",\"rootMargin\",\"onChange\",\"skip\",\"trackVisibility\",\"delay\",\"initialInView\",\"fallbackInView\"];function p(t){return\"function\"!==typeof t.children}r.Component;function v(t){var e,n=void 0===t?{}:t,i=n.threshold,o=n.delay,a=n.trackVisibility,c=n.rootMargin,u=n.root,s=n.triggerOnce,l=n.skip,d=n.initialInView,p=n.fallbackInView,v=n.onChange,h=r.useState(null),b=h[0],g=h[1],y=r.useRef(),m=r.useState({inView:!!d,entry:void 0}),w=m[0],O=m[1];y.current=v,r.useEffect((function(){var t;if(!l&&b)return t=f(b,(function(e,n){O({inView:e,entry:n}),y.current&&y.current(e,n),n.isIntersecting&&s&&t&&(t(),t=void 0)}),{root:u,rootMargin:c,threshold:i,trackVisibility:a,delay:o},p),function(){t&&t()}}),[Array.isArray(i)?i.toString():i,b,u,c,s,l,a,p,o]);var k=null==(e=w.entry)?void 0:e.target;r.useEffect((function(){b||!k||s||l||O({inView:!!d,entry:void 0})}),[b,k,s,l,d]);var j=[g,w.inView,w.entry];return j.ref=j[0],j.inView=j[1],j.entry=j[2],j}},vlRD:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,6,0,3,4,5,7]]]);","extractedComments":[]}